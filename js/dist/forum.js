(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{"use strict";const t=flarum.core.compat["common/app"];e.n(t)().initializers.add("huseyinfiliz-sort-changer-common",function(){console.log("[huseyinfiliz/sort-changer] Hello, forum and admin!")});const o=flarum.core.compat["common/extend"],r=flarum.core.compat["forum/app"];var n=e.n(r);const a=flarum.core.compat["forum/components/IndexPage"];var s=e.n(a);n().initializers.add("huseyinfiliz-sort-changer",function(){console.log("[SortChanger] Uzantı başlatıldı");var e=!1;(0,o.extend)(s().prototype,"oninit",function(t){if(!m.route.param("tags")&&!m.route.param("q")){var o=n().forum.attribute("sortChangerDefaultSort"),r=m.route.param("sort");if(r!==o||e){if(!e&&!r&&o&&"latest"!==o){var a=Object.assign({},m.route.param()||{});delete a.key,a.sort=o,setTimeout(function(){m.route.set(n().route("index",a),!0,{replace:!0}),setTimeout(function(){window.history.replaceState(null,"",n().route("index",{}))},50)},0)}}else{var s=Object.assign({},m.route.param()||{});delete s.sort,delete s.key,window.history.replaceState(null,"",n().route("index",s))}e=!0}}),(0,o.extend)(s().prototype,"onremove",function(){e=!1}),(0,o.extend)(s().prototype,"oncreate",function(e){if(!m.route.param("tags")&&!m.route.param("q")){var t=n().forum.attribute("sortChangerDefaultSort");console.log("[SortChanger] oncreate - Dropdown aranıyor...");var o=0,r=function(){o++;var e=document.querySelector(".item-sort .Dropdown-menu");e||(e=document.querySelector(".Dropdown-menu")),e?e.querySelectorAll("li button").forEach(function(e){var o=e.querySelector(".Button-label");"Latest"===(o?o.textContent.trim():"")&&(e.onclick=function(o){if(o.preventDefault(),o.stopPropagation(),console.log("[SortChanger] Latest tıklandı!"),"latest"===t)n().discussions&&(n().discussions.refreshParams({sort:""}),n().discussions.refresh());else{var r=Object.assign({},m.route.param()||{});delete r.key,r.sort="latest",m.route.set(n().route("index",r)),n().discussions&&(n().discussions.refreshParams({sort:""}),n().discussions.refresh())}var a=e.closest(".Dropdown");a&&a.classList.remove("open")},console.log("[SortChanger] Latest butonu güncellendi!"))}):o<10&&setTimeout(r,500)};setTimeout(r,500)}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map